/**
</> Original base BochilGaming 
</> Recode simple by @NeKosmic
**/

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.constants=void 0;var _fs2=_interopRequireDefault(require("fs")),_util=require("util"),_path=require("path");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,a,n,r,i,d){try{var h=e[i](d),s=h.value}catch(l){a(l);return}h.done?t(s):Promise.resolve(s).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function d(e){asyncGeneratorStep(i,n,r,d,h,"next",e)}function h(e){asyncGeneratorStep(i,n,r,d,h,"throw",e)}d(void 0)})}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classPrivateMethodGet(e,t,a){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return a}const fs={read:(0,_util.promisify)(_fs2.default.read),write:(0,_util.promisify)(_fs2.default.write),open:(0,_util.promisify)(_fs2.default.open),close:(0,_util.promisify)(_fs2.default.close)},nullByte=Buffer.alloc(1);nullByte[0]=0;const constants={TYPE_LOSSY:0,TYPE_LOSSLESS:1,TYPE_EXTENDED:2};function VP8Width(e){return 16383&(e[7]<<8|e[6])}function VP8Height(e){return 16383&(e[9]<<8|e[8])}function VP8LWidth(e){return(16383&(e[2]<<8|e[1]))+1}function VP8LHeight(e){let t=e[4]<<16|e[3]<<8|e[2];return(16383&(t>>=6))+1}function doesVP8LHaveAlpha(e){return!!(16&e[4])}function createBasicChunk(e,t){let a=Buffer.alloc(8),n=t.length,r;return a.write(e,0),a.writeUInt32LE(n,4),r=[a,t],1&n&&(r[2]=nullByte),r}exports.constants=constants;var _convertToExtended=new WeakSet,_demuxFrame=new WeakSet,_readHeader=new WeakSet,_readChunkHeader=new WeakSet,_readChunkHeader_buf=new WeakSet,_readChunk_raw=new WeakSet,_readChunk_VP=new WeakSet,_readChunk_VP8_buf=new WeakSet,_readChunk_VP8L=new WeakSet,_readChunk_VP8L_buf=new WeakSet,_readChunk_VP8X=new WeakSet,_readChunk_ANIM=new WeakSet,_readChunk_ANMF=new WeakSet,_readChunk_ALPH=new WeakSet,_readChunk_ALPH_buf=new WeakSet,_readChunk_ICCP=new WeakSet,_readChunk_EXIF=new WeakSet,_readChunk_XMP=new WeakSet,_readChunk_Skip=new WeakSet,_read=new WeakSet;class Image{constructor(){_read.add(this),_readChunk_Skip.add(this),_readChunk_XMP.add(this),_readChunk_EXIF.add(this),_readChunk_ICCP.add(this),_readChunk_ALPH_buf.add(this),_readChunk_ALPH.add(this),_readChunk_ANMF.add(this),_readChunk_ANIM.add(this),_readChunk_VP8X.add(this),_readChunk_VP8L_buf.add(this),_readChunk_VP8L.add(this),_readChunk_VP8_buf.add(this),_readChunk_VP.add(this),_readChunk_raw.add(this),_readChunkHeader_buf.add(this),_readChunkHeader.add(this),_readHeader.add(this),_demuxFrame.add(this),_convertToExtended.add(this),_defineProperty(this,"data",null),_defineProperty(this,"loaded",!1),_defineProperty(this,"path","")}clear(){this.data=null,this.path="",this.loaded=!1}get width(){if(!this.loaded)return;let e=this.data;return e.extended?e.extended.width:e.vp8l?e.vp8l.width:e.vp8?e.vp8.width:void 0}get height(){if(!this.loaded)return;let e=this.data;return e.extended?e.extended.height:e.vp8l?e.vp8l.height:e.vp8?e.vp8.height:void 0}get type(){return this.loaded?this.data.type:void 0}get hasAnim(){return!!this.loaded&&!!this.data.extended&&this.data.extended.hasAnim}get anim(){return this.hasAnim?this.data.anim:void 0}get frameCount(){return this.anim?this.anim.frameCount:0}get iccp(){return this.data.extended&&this.data.extended.hasICCP?this.data.iccp.raw:void 0}set iccp(e){this.data.extended||_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2).call(this),void 0===e?(this.data.extended.hasICCP=!1,delete this.data.iccp):(this.data.iccp={raw:e},this.data.extended.hasICCP=!0)}get exif(){return this.data.extended&&this.data.extended.hasEXIF?this.data.exif.raw:void 0}set exif(e){this.data.extended||_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2).call(this),void 0===e?(this.data.extended.hasEXIF=!1,delete this.data.exif):(this.data.exif={raw:e},this.data.extended.hasEXIF=!0)}get xmp(){return this.data.extended&&this.data.extended.hasXMP?this.data.xmp.raw:void 0}set xmp(e){this.data.extended||_classPrivateMethodGet(this,_convertToExtended,_convertToExtended2).call(this),void 0===e?(this.data.extended.hasXMP=!1,delete this.data.xmp):(this.data.xmp={raw:e},this.data.extended.hasXMP=!0)}load(e){var t=this;return _asyncToGenerator(function*(){t.path=e,t.data=yield _classPrivateMethodGet(t,_read,_read2).call(t,e),t.loaded=!0})()}demuxAnim(e,t=-1,a="#FNAME#"){var n=this;return _asyncToGenerator(function*(){let r=0,i=n.frameCount;if(0==i)throw Error("This WebP isn't an animation");-1!=t&&(r=i=t);for(let d=r;d<=i;d++)yield _classPrivateMethodGet(n,_demuxFrame,_demuxFrame2).call(n,`${e}/${a}_${d}.webp`.replace(/#FNAME#/g,(0,_path.basename)(n.path,".webp")),n.anim.frames[d])})()}replaceFrame(e,t){var a=this;return _asyncToGenerator(function*(){if(!a.hasAnim)throw Error("WebP isn't animated");if(t<0||t>=a.frameCount)throw Error(`Frame index ${t} out of bounds (0<=index<${a.frameCount})`);let n=new Image;switch(yield n.load(e),n.type){case constants.TYPE_LOSSY:case constants.TYPE_LOSSLESS:break;case constants.TYPE_EXTENDED:if(n.hasAnim)throw Error("Merging animations not currently supported");break;default:throw Error("Unknown WebP type")}switch(a.anim.frames[t].type){case constants.TYPE_LOSSY:a.anim.frames[t].vp8.alpha&&delete a.anim.frames[t].alph,delete a.anim.frames[t].vp8;break;case constants.TYPE_LOSSLESS:delete a.anim.frames[t].vp8l;break;default:throw Error("Unknown frame type")}switch(n.type){case constants.TYPE_LOSSY:a.anim.frames[t].vp8=n.data.vp8;break;case constants.TYPE_LOSSLESS:a.anim.frames[t].vp8l=n.data.vp8l;break;case constants.TYPE_EXTENDED:n.data.vp8?(a.anim.frames[t].vp8=n.data.vp8,n.data.vp8.alpha&&(a.anim.frames[t].alph=n.data.alph)):n.data.vp8l&&(a.anim.frames[t].vp8l=n.data.vp8l)}a.anim.frames[t].width=n.width,a.anim.frames[t].height=n.height})()}muxAnim({path:e,bgColor:t=[255,255,255,255],loops:a=0}={}){var n=this;return _asyncToGenerator(function*(){return Image.muxAnim({path:e,bgColor:t,loops:a,frames:n.frames})})()}static muxAnim({path:e,frames:t,width:a=0,height:n=0,bgColor:r=[255,255,255,255],loops:i=0,delay:d=100,x:h=0,y:s=0,blend:l=!0,dispose:o=!1}={}){return _asyncToGenerator(function*(){let u=Buffer.alloc(12),c=Buffer.alloc(18),$=[],f,p=!1,_,w=0,P=0,k=a-1,v=n-1;if(0==t.length)throw Error("No frames to mux");if(k<=0||k>16777216)throw Error("Width out of range");if(v<=0||v>16777216)throw Error("Height out of range");if(v*k>4294967295)throw Error(`Width*height too large (${k}, ${v})`);if(i<0||i>=16777216)throw Error("Loops out of range");else if(d<0||d>=16777216)throw Error("Delay out of range");else if(h<0||h>=16777216)throw Error("X out of range");else if(s<0||s>=16777216)throw Error("Y out of range");u.write("RIFF",0),u.write("WEBP",8),c.write("VP8X",0),c.writeUInt32LE(10,4),c[8]|=2,0!=a&&c.writeUIntLE(k,12,3),0!=n&&c.writeUIntLE(v,15,3),$.push(u,c),(c=Buffer.alloc(14)).write("ANIM",0),c.writeUInt32LE(6,4),c.writeUInt8(r[2],8),c.writeUInt8(r[1],9),c.writeUInt8(r[0],10),c.writeUInt8(r[3],11),c.writeUInt16LE(i,12),$.push(c);for(let C=0,E=t.length;C<E;C++){let y=void 0===t[C].delay?d:t[C].delay,m=void 0===t[C].x?h:t[C].x,L=void 0===t[C].y?s:t[C].y,g=void 0===t[C].blend?l:t[C].blend,x=void 0===t[C].dispose?o:t[C].dispose,I=16,b=!0,S;if(d<0||d>=16777216)throw Error(`Delay out of range on frame ${C}`);if(h<0||h>=16777216)throw Error(`X out of range on frame ${C}`);if(s<0||s>=16777216)throw Error(`Y out of range on frame ${C}`);switch((c=Buffer.alloc(24)).write("ANMF",0),c.writeUIntLE(m,8,3),c.writeUIntLE(L,11,3),c.writeUIntLE(y,20,3),g||(c[23]|=2),x&&(c[23]|=1),t[C].path?yield(f=new Image).load(t[C].path):f={data:t[C]},c.writeUIntLE(f.data.width-1,14,3),c.writeUIntLE(f.data.height-1,17,3),f.data.type){case constants.TYPE_LOSSY:{let M=f.data.vp8;w=M.width>w?M.width:w,P=M.height>P?M.height:P,I+=M.raw.length+8,S=createBasicChunk("VP8 ",M.raw)}break;case constants.TYPE_LOSSLESS:{let T=f.data.vp8l;w=T.width>w?T.width:w,P=T.height>P?T.height:P,I+=T.raw.length+8,T.alpha&&(p=!0),S=createBasicChunk("VP8L",T.raw)}break;case constants.TYPE_EXTENDED:if(f.data.extended.hasAnim){let V=f.data.anim.frames;b=!1,f.data.extended.hasAlpha&&(p=!0);for(let G=0,A=V.length;G<A;G++){w=V[G].width+m>w?V[G].width+m:w,P=V[G].height+L>P?V[G].height+L:P;let X=Buffer.alloc(8);X.write("ANMF",0),X.writeUInt32LE(V[G].raw.length,4),$.push(X,V[G].raw),1&V[G].raw.length&&$.push(nullByte),(X=V[G].raw).writeUIntLE(m,0,3),X.writeUIntLE(L,3,3),X.writeUIntLE(y,12,3),g?X[15]&=253:X[15]|=2,x?X[15]|=1:X[15]&=254}}else w=f.data.extended.width>w?f.data.extended.width:w,P=f.data.extended.height>P?f.data.extended.height:P,f.data.vp8?(S=[],f.data.alph&&(p=!0,S.push(...createBasicChunk("ALPH",f.data.alph.raw)),I+=f.data.alph.raw.length+8),S.push(...createBasicChunk("VP8 ",f.data.vp8.raw)),I+=f.data.vp8.raw.length+8):f.data.vp8l&&(S=createBasicChunk("VP8L",f.data.vp8l.raw),f.data.vp8l.alpha&&(p=!0),I+=f.data.vp8l.raw.length+8);break;default:throw Error("Unknown image type")}b&&(c.writeUInt32LE(I,4),$.push(c,...S))}0==a&&$[1].writeUIntLE(w-1,12,3),0==n&&$[1].writeUIntLE(P-1,15,3),_=4;for(let F=1,H=$.length;F<H;F++)_+=$[F].length;u.writeUInt32LE(_,4),p&&($[1][8]|=16);let U=yield fs.open(e,"w");for(let Y=0,N=$.length;Y<N;Y++)yield fs.write(U,$[Y],0,void 0,void 0);yield fs.close(U)})()}}var _convertToExtended2=function e(){if(!this.loaded)throw Error("No image loaded");this.data.type=constants.TYPE_EXTENDED,this.data.extended={hasICC:!1,hasAlpha:!1,hasEXIF:!1,hasXMP:!1,width:this.vp8?this.vp8.width:this.vp8l?this.vp8l.width:1,height:this.vp8?this.vp8.height:this.vp8l?this.vp8l.height:1}},_demuxFrame2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(12),n,r,i=[];if(a.write("RIFF",0),a.write("WEBP",8),i.push(a),(this.data.extended.hasICC||this.data.extended.hasEXIF||this.data.extended.hasXMP||t.vp8&&t.vp8.alpha)&&((r=Buffer.alloc(18)).write("VP8X",0),r.writeUInt32LE(10,4),this.data.extended.hasICC&&(r[8]|=32),(t.vp8l&&t.vp8l.alpha||t.vp8&&t.vp8.alpha)&&(r[8]|=16),this.data.extended.hasEXIF&&(r[8]|=8),this.data.extended.hasXMP&&(r[8]|=4),r.writeUIntLE(t.width-1,12,3),r.writeUIntLE(t.height-1,15,3),i.push(r),this.data.extended.hasICC&&i.push(...createBasicChunk("ICCP",this.data.extended.icc.raw))),t.vp8l)i.push(...createBasicChunk("VP8L",t.vp8l.raw));else if(t.vp8)t.vp8.alpha&&i.push(...createBasicChunk("ALPH",t.alph.raw)),i.push(...createBasicChunk("VP8 ",t.vp8.raw));else throw Error("Frame has no VP8/VP8L?");this.type==constants.TYPE_EXTENDED&&(this.data.extended.hasEXIF&&i.push(...createBasicChunk("EXIF",this.data.extended.exif.raw)),this.data.extended.hasXMP&&i.push(...createBasicChunk("XMP ",this.data.extended.xmp.raw))),n=4;for(let d=1,h=i.length;d<h;d++)n+=i[d].length;a.writeUInt32LE(n,4);let s=yield fs.open(e,"w");for(let l=0,o=i.length;l<o;l++)yield fs.write(s,i[l],0,void 0,void 0);yield fs.close(s)});return function t(a,n){return e.apply(this,arguments)}}(),_readHeader2=function(){var e=_asyncToGenerator(function*(e){let t=Buffer.alloc(12),{bytesRead:a}=yield fs.read(e,t,0,12,void 0);if(12!=a)throw Error("Reached end of file while reading header");if("RIFF"!=t.toString("utf8",0,4))throw Error("Bad header (not RIFF)");if("WEBP"!=t.toString("utf8",8,12))throw Error("Bad header (not WEBP)");return{fileSize:t.readUInt32LE(4)}});return function t(a){return e.apply(this,arguments)}}(),_readChunkHeader2=function(){var e=_asyncToGenerator(function*(e){let t=Buffer.alloc(8),{bytesRead:a}=yield fs.read(e,t,0,8,void 0);if(0==a)return{fourCC:"\0\0\0\0",size:0};if(a<8)throw Error("Reached end of file while reading chunk header");return{fourCC:t.toString("utf8",0,4),size:t.readUInt32LE(4)}});return function t(a){return e.apply(this,arguments)}}(),_readChunkHeader_buf2=function e(t,a){return a>=t.length?{fourCC:"\0\0\0\0",size:0}:{fourCC:t.toString("utf8",a,a+4),size:t.readUInt32LE(a+4)}},_readChunk_raw2=function(){var e=_asyncToGenerator(function*(e,t,a){let n=Buffer.alloc(a),r=Buffer.alloc(1),{bytesRead:i}=yield fs.read(t,n,0,a,void 0);if(i!=a)throw Error(`Reached end of file while reading ${e} chunk`);return 1&a&&(yield fs.read(t,r,0,1,void 0)),{raw:n}});return function t(a,n,r){return e.apply(this,arguments)}}(),_readChunk_VP2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(t),n=Buffer.alloc(1),{bytesRead:r}=yield fs.read(e,a,0,t,void 0);if(r!=t)throw Error("Reached end of file while reading VP8 chunk");return 1&t&&(yield fs.read(e,n,0,1,void 0)),{raw:a,width:VP8Width(a,8),height:VP8Height(a,8)}});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_VP8_buf2=function e(t,a,n){if(n>=t.length)throw Error("Reached end of buffer while reading VP8 chunk");let r=t.slice(n,n+a);return{raw:r,width:VP8Width(r),height:VP8Height(r)}},_readChunk_VP8L2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(t),n=Buffer.alloc(1),{bytesRead:r}=yield fs.read(e,a,0,t,void 0);if(r!=t)throw Error("Reached end of file while reading VP8L chunk");return 1&t&&(yield fs.read(e,n,0,1,void 0)),{raw:a,alpha:doesVP8LHaveAlpha(a,0),width:VP8LWidth(a),height:VP8LHeight(a)}});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_VP8L_buf2=function e(t,a,n){if(n>=t.length)throw Error("Reached end of buffer while reading VP8L chunk");let r=t.slice(n,n+a);return{raw:r,alpha:doesVP8LHaveAlpha(r),width:VP8LWidth(r),height:VP8LHeight(r)}},_readChunk_VP8X2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(t),{bytesRead:n}=yield fs.read(e,a,0,t,void 0);if(n!=t)throw Error("Reached end of file while reading VP8X chunk");return{raw:a,hasICC:!!(32&a[0]),hasAlpha:!!(16&a[0]),hasEXIF:!!(8&a[0]),hasXMP:!!(4&a[0]),hasAnim:!!(2&a[0]),width:a.readUIntLE(4,3)+1,height:a.readUIntLE(7,3)+1}});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_ANIM2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(t),{bytesRead:n}=yield fs.read(e,a,0,t,void 0);if(n!=t)throw Error("Reached end of file while reading ANIM chunk");return{raw:a,bgColor:a.slice(0,4),loopCount:a.readUInt16LE(4)}});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_ANMF2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(t),n=Buffer.alloc(1),{bytesRead:r}=yield fs.read(e,a,0,t,void 0);if(r!=t)throw Error("Reached end of file while reading ANMF chunk");1&t&&(yield fs.read(e,n,0,1,void 0));let i={raw:a,x:a.readUIntLE(0,3),y:a.readUIntLE(3,3),width:a.readUIntLE(6,3)+1,height:a.readUIntLE(9,3)+1,duration:a.readUIntLE(12,3),blend:!(2&a[15]),dispose:!!(1&a[15])},d=!0,h=16;for(;d;){let s=_classPrivateMethodGet(this,_readChunkHeader_buf,_readChunkHeader_buf2).call(this,a,h);switch(h+=8,s.fourCC){case"VP8 ":i.vp8||(i.type=constants.TYPE_LOSSY,i.vp8=_classPrivateMethodGet(this,_readChunk_VP8_buf,_readChunk_VP8_buf2).call(this,a,s.size,h));break;case"VP8L":i.vp8l||(i.type=constants.TYPE_LOSSLESS,i.vp8l=_classPrivateMethodGet(this,_readChunk_VP8L_buf,_readChunk_VP8L_buf2).call(this,a,s.size,h));break;case"ALPH":i.vp8&&(i.alph=_classPrivateMethodGet(this,_readChunk_ALPH_buf,_readChunk_ALPH_buf2).call(this,a,s.size,h),i.vp8.alpha=!0);break;default:d=!1}h+=s.size+1,1&s.size&&h++,h>=a.length&&(d=!1)}return i});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_ALPH2=function(){var e=_asyncToGenerator(function*(e,t){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2).call(this,"ALPH",e,t)});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_ALPH_buf2=function e(t,a,n){if(cusor>=t.length)throw Error("Reached end of buffer while reading ALPH chunk");return{raw:t.slice(n,n+a)}},_readChunk_ICCP2=function(){var e=_asyncToGenerator(function*(e,t){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2).call(this,"ICCP",e,t)});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_EXIF2=function(){var e=_asyncToGenerator(function*(e,t){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2).call(this,"EXIF",e,t)});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_XMP2=function(){var e=_asyncToGenerator(function*(e,t){return _classPrivateMethodGet(this,_readChunk_raw,_readChunk_raw2).call(this,"XML",e,t)});return function t(a,n){return e.apply(this,arguments)}}(),_readChunk_Skip2=function(){var e=_asyncToGenerator(function*(e,t){let a=Buffer.alloc(t),n=Buffer.alloc(1),{bytesRead:r}=yield fs.read(e,a,0,t,void 0);if(r!=t)throw Error("Reached end of file while skipping chunk");1&t&&(yield fs.read(e,n,0,1,void 0))});return function t(a,n){return e.apply(this,arguments)}}(),_read2=function(){var e=_asyncToGenerator(function*(e){let t=yield fs.open(e,"r"),a={},n=!0,r=!0,{fileSize:i}=yield _classPrivateMethodGet(this,_readHeader,_readHeader2).call(this,t);for(;n;){let{fourCC:d,size:h}=yield _classPrivateMethodGet(this,_readChunkHeader,_readChunkHeader2).call(this,t);switch(d){case"VP8 ":a.vp8?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):a.vp8=yield _classPrivateMethodGet(this,_readChunk_VP,_readChunk_VP2).call(this,t,h),r&&(a.type=constants.TYPE_LOSSY,n=!1);break;case"VP8L":a.vp8l?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):a.vp8l=yield _classPrivateMethodGet(this,_readChunk_VP8L,_readChunk_VP8L2).call(this,t,h),r&&(a.type=constants.TYPE_LOSSLESS,n=!1);break;case"VP8X":a.extended?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):(a.type=constants.TYPE_EXTENDED,a.extended=yield _classPrivateMethodGet(this,_readChunk_VP8X,_readChunk_VP8X2).call(this,t,h));break;case"ANIM":if(a.anim)yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h);else{let{raw:s,bgColor:l,loopCount:o}=yield _classPrivateMethodGet(this,_readChunk_ANIM,_readChunk_ANIM2).call(this,t,h);a.anim={backgroundColor:[l[2],l[1],l[0],l[3]],loopCount:o,frames:[]},a.anim.raw=s}break;case"ANMF":{let u=yield _classPrivateMethodGet(this,_readChunk_ANMF,_readChunk_ANMF2).call(this,t,h);a.anim.frames.push(u)}break;case"ALPH":a.alph?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):a.alph=yield _classPrivateMethodGet(this,_readChunk_ALPH,_readChunk_ALPH2).call(this,t,h);break;case"ICCP":a.iccp?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):a.iccp=yield _classPrivateMethodGet(this,_readChunk_ICCP,_readChunk_ICCP2).call(this,t,h);break;case"EXIF":a.exif?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):a.exif=yield _classPrivateMethodGet(this,_readChunk_EXIF,_readChunk_EXIF2).call(this,t,h);break;case"XMP ":a.xmp?yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h):a.xmp=yield _classPrivateMethodGet(this,_readChunk_XMP,_readChunk_XMP2).call(this,t,h);break;case"\0\0\0\0":n=!1;break;default:yield _classPrivateMethodGet(this,_readChunk_Skip,_readChunk_Skip2).call(this,t,h)}r=!1}return a.type==constants.TYPE_EXTENDED&&a.extended.hasAnim&&(a.anim.frameCount=a.anim.frames.length),a});return function t(a){return e.apply(this,arguments)}}(),_default={TYPE_LOSSY:constants.TYPE_LOSSY,TYPE_LOSSLESS:constants.TYPE_LOSSLESS,TYPE_EXTENDED:constants.TYPE_EXTENDED,Image};exports.default=_default;

/**
[_>] https://github.com/NeKosmic/
[_>] https://gitlab.com/NeKosmic/
**/